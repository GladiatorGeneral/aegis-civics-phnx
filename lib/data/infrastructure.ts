import { InfrastructureDatasetSummary, InfrastructureSpendingRecord } from "@/lib/types";

export const infrastructureSpending: InfrastructureSpendingRecord[] = [
  {
    year: 1998,
    totalSpendingUsdBillions: 419.5,
    capitalInvestment: 251.7,
    maintenanceOperations: 167.8,
    federalSpending: 91.2,
    stateLocalSpending: 328.3,
    inflationAdjustedUsdBillions: 748.2,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 94.4,
    deviationPercent: 14.4,
    majorFederalBillEnacted: "TIFIA (1998)",
    dataSource: "CBO Historical Tables",
  },
  {
    year: 1999,
    totalSpendingUsdBillions: 430.2,
    capitalInvestment: 258.1,
    maintenanceOperations: 172.1,
    federalSpending: 93.5,
    stateLocalSpending: 336.7,
    inflationAdjustedUsdBillions: 748.5,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 94.7,
    deviationPercent: 14.5,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2000,
    totalSpendingUsdBillions: 445.3,
    capitalInvestment: 267.2,
    maintenanceOperations: 178.1,
    federalSpending: 96.8,
    stateLocalSpending: 348.5,
    inflationAdjustedUsdBillions: 753.8,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 100.0,
    deviationPercent: 15.3,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2001,
    totalSpendingUsdBillions: 462.7,
    capitalInvestment: 277.6,
    maintenanceOperations: 185.1,
    federalSpending: 100.5,
    stateLocalSpending: 362.2,
    inflationAdjustedUsdBillions: 767.9,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 114.1,
    deviationPercent: 17.4,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2002,
    totalSpendingUsdBillions: 474.1,
    capitalInvestment: 284.5,
    maintenanceOperations: 189.6,
    federalSpending: 102.9,
    stateLocalSpending: 371.2,
    inflationAdjustedUsdBillions: 772.4,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 118.6,
    deviationPercent: 18.1,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2003,
    totalSpendingUsdBillions: 480.8,
    capitalInvestment: 288.5,
    maintenanceOperations: 192.3,
    federalSpending: 104.3,
    stateLocalSpending: 376.5,
    inflationAdjustedUsdBillions: 767.3,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 113.5,
    deviationPercent: 17.4,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2004,
    totalSpendingUsdBillions: 469.2,
    capitalInvestment: 281.5,
    maintenanceOperations: 187.7,
    federalSpending: 101.8,
    stateLocalSpending: 367.4,
    inflationAdjustedUsdBillions: 732.9,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 79.1,
    deviationPercent: 12.1,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2005,
    totalSpendingUsdBillions: 456.3,
    capitalInvestment: 273.8,
    maintenanceOperations: 182.5,
    federalSpending: 99.0,
    stateLocalSpending: 357.3,
    inflationAdjustedUsdBillions: 694.7,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 40.9,
    deviationPercent: 6.3,
    majorFederalBillEnacted: "SAFETEA-LU (2005)",
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2006,
    totalSpendingUsdBillions: 453.5,
    capitalInvestment: 272.1,
    maintenanceOperations: 181.4,
    federalSpending: 98.4,
    stateLocalSpending: 355.1,
    inflationAdjustedUsdBillions: 673.6,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 19.8,
    deviationPercent: 3.0,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2007,
    totalSpendingUsdBillions: 450.4,
    capitalInvestment: 270.2,
    maintenanceOperations: 180.2,
    federalSpending: 97.7,
    stateLocalSpending: 352.7,
    inflationAdjustedUsdBillions: 651.3,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -2.5,
    deviationPercent: -0.4,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2008,
    totalSpendingUsdBillions: 448.9,
    capitalInvestment: 269.3,
    maintenanceOperations: 179.6,
    federalSpending: 97.4,
    stateLocalSpending: 351.5,
    inflationAdjustedUsdBillions: 634.6,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -19.2,
    deviationPercent: -2.9,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2009,
    totalSpendingUsdBillions: 464.4,
    capitalInvestment: 278.6,
    maintenanceOperations: 185.8,
    federalSpending: 100.8,
    stateLocalSpending: 363.6,
    inflationAdjustedUsdBillions: 657.4,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 3.6,
    deviationPercent: 0.6,
    majorFederalBillEnacted: "ARRA (2009)",
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2010,
    totalSpendingUsdBillions: 465.1,
    capitalInvestment: 279.1,
    maintenanceOperations: 186.0,
    federalSpending: 100.9,
    stateLocalSpending: 364.2,
    inflationAdjustedUsdBillions: 645.3,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -8.5,
    deviationPercent: -1.3,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2011,
    totalSpendingUsdBillions: 447.3,
    capitalInvestment: 268.4,
    maintenanceOperations: 178.9,
    federalSpending: 97.0,
    stateLocalSpending: 350.3,
    inflationAdjustedUsdBillions: 604.3,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -49.5,
    deviationPercent: -7.6,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2012,
    totalSpendingUsdBillions: 437.7,
    capitalInvestment: 262.6,
    maintenanceOperations: 175.1,
    federalSpending: 95.0,
    stateLocalSpending: 342.7,
    inflationAdjustedUsdBillions: 579.2,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -74.6,
    deviationPercent: -11.4,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2013,
    totalSpendingUsdBillions: 427.7,
    capitalInvestment: 256.6,
    maintenanceOperations: 171.1,
    federalSpending: 92.8,
    stateLocalSpending: 334.9,
    inflationAdjustedUsdBillions: 556.0,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -97.8,
    deviationPercent: -15.0,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2014,
    totalSpendingUsdBillions: 433.1,
    capitalInvestment: 259.9,
    maintenanceOperations: 173.2,
    federalSpending: 94.0,
    stateLocalSpending: 339.1,
    inflationAdjustedUsdBillions: 555.0,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -98.8,
    deviationPercent: -15.1,
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2015,
    totalSpendingUsdBillions: 447.1,
    capitalInvestment: 268.3,
    maintenanceOperations: 178.8,
    federalSpending: 97.0,
    stateLocalSpending: 350.1,
    inflationAdjustedUsdBillions: 564.7,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -89.1,
    deviationPercent: -13.6,
    majorFederalBillEnacted: "FAST Act (2015)",
    dataSource: "CBO Historical Tables",
  },
  {
    year: 2016,
    totalSpendingUsdBillions: 448.3,
    capitalInvestment: 269.0,
    maintenanceOperations: 179.3,
    federalSpending: 97.3,
    stateLocalSpending: 351.0,
    inflationAdjustedUsdBillions: 559.2,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -94.6,
    deviationPercent: -14.5,
    dataSource: "BTS TPFS",
  },
  {
    year: 2017,
    totalSpendingUsdBillions: 440.5,
    capitalInvestment: 264.3,
    maintenanceOperations: 176.2,
    federalSpending: 95.6,
    stateLocalSpending: 344.9,
    inflationAdjustedUsdBillions: 540.4,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -113.4,
    deviationPercent: -17.3,
    dataSource: "BTS TPFS",
  },
  {
    year: 2018,
    totalSpendingUsdBillions: 462.4,
    capitalInvestment: 277.4,
    maintenanceOperations: 185.0,
    federalSpending: 100.3,
    stateLocalSpending: 362.1,
    inflationAdjustedUsdBillions: 557.5,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -96.3,
    deviationPercent: -14.7,
    dataSource: "BTS TPFS",
  },
  {
    year: 2019,
    totalSpendingUsdBillions: 478.9,
    capitalInvestment: 287.3,
    maintenanceOperations: 191.6,
    federalSpending: 103.9,
    stateLocalSpending: 375.0,
    inflationAdjustedUsdBillions: 567.6,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -86.2,
    deviationPercent: -13.2,
    dataSource: "BTS TPFS",
  },
  {
    year: 2020,
    totalSpendingUsdBillions: 521.8,
    capitalInvestment: 313.1,
    maintenanceOperations: 208.7,
    federalSpending: 113.2,
    stateLocalSpending: 408.6,
    inflationAdjustedUsdBillions: 605.8,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -48.0,
    deviationPercent: -7.3,
    majorFederalBillEnacted: "COVID-19 Relief",
    dataSource: "BTS TPFS",
  },
  {
    year: 2021,
    totalSpendingUsdBillions: 598.4,
    capitalInvestment: 359.0,
    maintenanceOperations: 239.4,
    federalSpending: 129.8,
    stateLocalSpending: 468.6,
    inflationAdjustedUsdBillions: 671.9,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 18.1,
    deviationPercent: 2.8,
    majorFederalBillEnacted: "IIJA (2021)",
    dataSource: "BTS TPFS",
  },
  {
    year: 2022,
    totalSpendingUsdBillions: 612.7,
    capitalInvestment: 367.6,
    maintenanceOperations: 245.1,
    federalSpending: 132.9,
    stateLocalSpending: 479.8,
    inflationAdjustedUsdBillions: 667.8,
    twentySixYearAverage: 653.8,
    deviationAbsolute: 14.0,
    deviationPercent: 2.1,
    majorFederalBillEnacted: "IIJA (ongoing)",
    dataSource: "BTS TPFS",
  },
  {
    year: 2023,
    totalSpendingUsdBillions: 625.8,
    capitalInvestment: 375.5,
    maintenanceOperations: 250.3,
    federalSpending: 135.7,
    stateLocalSpending: 490.1,
    inflationAdjustedUsdBillions: 625.8,
    twentySixYearAverage: 653.8,
    deviationAbsolute: -28.0,
    deviationPercent: -4.3,
    majorFederalBillEnacted: "IIJA (ongoing)",
    dataSource: "Brookings/USAFacts",
  },
];

export function getInfrastructureSummary(records: InfrastructureSpendingRecord[] = infrastructureSpending): InfrastructureDatasetSummary {
  if (!records.length) {
    return {
      baselineAverage: 0,
      currentYear: 0,
      currentDeviationPercent: 0,
      yearsAboveAverage: 0,
      yearsBelowAverage: 0,
    };
  }

  const baselineAverage = records[0]?.twentySixYearAverage ?? 0;
  const last = records[records.length - 1];
  const yearsAboveAverage = records.filter((r) => r.deviationPercent > 0).length;
  const yearsBelowAverage = records.filter((r) => r.deviationPercent < 0).length;

  return {
    baselineAverage,
    currentYear: last.year,
    currentDeviationPercent: last.deviationPercent,
    yearsAboveAverage,
    yearsBelowAverage,
  };
}
